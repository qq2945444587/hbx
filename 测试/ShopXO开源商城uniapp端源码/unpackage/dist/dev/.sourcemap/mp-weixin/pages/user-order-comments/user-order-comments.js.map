{"version":3,"sources":["uni-app:///main.js","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?7519","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?8d7a","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?7d43","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?5c75","uni-app:///pages/user-order-comments/user-order-comments.vue","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?2954","webpack:///E:/测试/ShopXO开源商城uniapp端源码/pages/user-order-comments/user-order-comments.vue?719e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","common_static_url","data_list_loding_status","data_list_loding_msg","params","detail","editor_path_type","rating_msg","anonymous_value","anonymous_msg_list","form_rating_list","form_images_list","form_content_list","form_button_disabled","components","componentNoData","componentBottomLine","props","onLoad","onShow","app","onPullDownRefresh","methods","init","uni","title","url","method","id","dataType","success","self","fail","upload_show_event","current","urls","upload_delete_event","content","list","file_upload_event","temp_list","count","upload_one_by_one","filePath","name","formData","action","path_type","complete","anonymous_event","rating_event","form_content_event","formSubmit","form_data","setTimeout"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,0BAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AACuE;AACL;AACa;;;AAG/E;AACyK;AACzK,gBAAgB,kLAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAioB,CAAgB,spBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACoDrpB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAIA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAC;IACAC;EACA;EACAC;EAEAC;IACA;MACAd;IACA;EACA;EAEAe;IACA;IACA;;IAEA;IACAC;EACA;EAEA;EACAC;IACA;EACA;EAEAC;IACAC;MACA;MACAC;QACAC;MACA;MACA;QACAvB;MACA;MACAsB;QACAE;QACAC;QACA3B;UACA4B;QACA;QACAC;QACAC;UACAN;UACAA;UACA;YACA;YACAO;cACAzB;cACAD;cACAH;cACAC;YACA;UACA;YACA4B;cACA7B;cACAC;YACA;YACA;cACAiB;YACA;UACA;QACA;QACAY;UACAR;UACAA;UACAO;YACA7B;YACAC;UACA;UACAiB;QACA;MACA;IACA;IAEA;IACAa;MACA;MACA;MACAT;QACAU;QACAC;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACAZ;QACAC;QACAY;QACAP;UACA;YACA;YACAQ;YACAP;cACApB;YACA;UACA;QACA;MACA;IACA;IAEA;IACA4B;MACA;MACA;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;QACA7B;MACA;;MAEA;MACA;MACAa;QACAiB;QACAX;UACA;UACA;UACA;UACA;UACAC;QACA;MACA;IACA;IAEA;IACAW;MACA;MACA;QACAlB;UACAE;UACAiB;UACAC;UACAC;YACAC;YACAC;UACA;UACAjB;YACAA;YACA;cACA;cACA;gBACA;gBACA;kBACAQ;gBACA;gBACAA;gBACAP;kBACApB;gBACA;cACA;gBACAS;cACA;YACA;UACA;UACAY;YACAA;UACA;UACAgB;YACAP;;YAEA;YACA;cACA;cACA;YAAA,CACA;cACA;cACAV;YACA;UACA;QACA;MACA;IACA;IAEA;IACAkB;MACA;QACAzC;MACA;IACA;IAEA;IACA0C;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;QACA;UACAV;QACA;QACA;UACAA;QACA;MACA;MACA;QACA9B;MACA;IACA;IAEA;IACAyC;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;QACA;UACAX;QACA;QACA;UACAA;QACA;MACA;MACA;QACA5B;MACA;IACA;IAEA;IACAwC;MACA;MACA;;MAEA;MACA;MACA;QACAhC;QACA;MACA;MACA;MACA;MAEA;QACAA;QACA;MACA;;MAEA;MACA;MACA;QACAA;QACA;MACA;MAEA;QACA;QACA;UACAA;UACA;QACA;MACA;;MAEA;MACA;QACA;UACA;YACAA;YACA;UACA;QACA;MACA;;MAEA;MACA;MACAiC;MACAA;MACAA;QACA;MACA;MACAA;MACAA;MACAA;;MAEA;MACA;MACA7B;QACAC;MACA;MACAM;QACAlB;MACA;MACAW;QACAE;QACAC;QACA3B;QACA6B;QACAC;UACAN;UACA;YACAJ;YACAkC;cACA9B;YACA;UACA;YACAO;cACAlB;YACA;YACAO;UACA;QACA;QACAY;UACAR;UACAO;YACAlB;UACA;UACAO;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjZA;AAAA;AAAA;AAAA;AAA25B,CAAgB,q5BAAG,EAAC,C;;;;;;;;;;;ACA/6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user-order-comments/user-order-comments.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user-order-comments/user-order-comments.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-order-comments.vue?vue&type=template&id=5a77869c&\"\nvar renderjs\nimport script from \"./user-order-comments.vue?vue&type=script&lang=js&\"\nexport * from \"./user-order-comments.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user-order-comments.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user-order-comments/user-order-comments.vue\"\nexport default component.exports","export * from \"-!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-order-comments.vue?vue&type=template&id=5a77869c&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.detail != null\n      ? _vm.__map(_vm.detail.items, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g0 =\n            (_vm.form_images_list[index] || null) != null &&\n            _vm.form_images_list[index].length > 0\n          var g1 =\n            (_vm.form_images_list[index] || null) == null ||\n            _vm.form_images_list[index].length < 3\n          return {\n            $orig: $orig,\n            g0: g0,\n            g1: g1,\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-order-comments.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-order-comments.vue?vue&type=script&lang=js&\"","<template>\r\n    <view>\r\n        <view class=\"padding-main\">\r\n            <view v-if=\"detail != null\">\r\n                <form @submit=\"formSubmit\" class=\"form-container\">\r\n                    <view v-for=\"(item, index) in detail.items\" :key=\"index\" class=\"form-gorup oh\">\r\n                        <view class=\"oh\">\r\n                            <navigator :url=\"item.goods_url\" hover-class=\"none\">\r\n                                <image class=\"goods-image fl radius br margin-right-lg\" :src=\"item.images\" mode=\"aspectFill\"></image>\r\n                            </navigator>\r\n                            <view class=\"item-base fl margin-top-sm\">\r\n                                <block v-for=\"(item, tx) in [1,2,3,4,5]\" :key=\"tx\">\r\n                                    <image class=\"xingxing-icon va-m\" :src=\"common_static_url+'stars' + (form_rating_list[index] != undefined && form_rating_list[index] >= item ? '-active' : '') + '-icon.png'\" mode=\"aspectFill\" @tap=\"rating_event\" :data-index=\"index\" :data-value=\"item\"></image>\r\n                                </block>\r\n                                <text v-if=\"form_rating_list[index] != undefined\" class=\"cr-gray va-m margin-left-lg\">{{rating_msg[form_rating_list[index]-1]}}</text>\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"margin-top-main br-t\">\r\n                            <textarea @input=\"form_content_event\" :data-index=\"index\" placeholder-class=\"cr-grey\" class=\"cr-base\" placeholder=\"宝贝满足你的期待吗？说说它的优点和美中不足的地方吧\" maxlength=\"230\"></textarea>\r\n                            <view class=\"form-container-upload oh\">\r\n                                <view class=\"form-upload-data fl\">\r\n                                    <block v-if=\"(form_images_list[index] || null) != null && form_images_list[index].length > 0\">\r\n                                        <view v-for=\"(item, ix) in form_images_list[index]\" :key=\"ix\" class=\"item fl\">\r\n                                            <text class=\"delete-icon\" @tap=\"upload_delete_event\" :data-index=\"index\" :data-ix=\"ix\">x</text>\r\n                                            <image :src=\"item\" @tap=\"upload_show_event\" :data-index=\"index\" :data-ix=\"ix\" mode=\"aspectFill\" class=\"padding-xs dis-block\"></image>\r\n                                        </view>\r\n                                    </block>\r\n                                </view>\r\n                                <image v-if=\"(form_images_list[index] || null) == null || form_images_list[index].length < 3\" class=\"upload-icon\" :src=\"common_static_url+'upload-icon.png'\" mode=\"aspectFill\" @tap=\"file_upload_event\" :data-index=\"index\"></image>\r\n                            </view>\r\n                        </view>\r\n                    </view>\r\n\r\n                    <view class=\"form-gorup anonymous\">\r\n                        <switch class=\"va-m\" name=\"is_anonymous\" @change=\"anonymous_event\"></switch>\r\n                        <text class=\"cr-base va-m\">匿名</text>\r\n                        <text class=\"fr cr-gray margin-top-lg\">{{anonymous_msg_list[anonymous_value]}}</text>\r\n                    </view>\r\n\r\n                    <view class=\"form-gorup form-gorup-submit\">\r\n                        <button form-type=\"submit\" class=\"bg-main br-main cr-white round text-size\" type=\"default\" hover-class=\"none\" :disabled=\"form_button_disabled\">提交</button>\r\n                    </view>\r\n                </form>\r\n            </view>\r\n            <view v-else>\r\n                <!-- 提示信息 -->\r\n                <component-no-data :propStatus=\"data_list_loding_status\" :propMsg=\"data_list_loding_msg\"></component-no-data>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n<script>\r\n    const app = getApp();\r\n    import componentNoData from \"../../components/no-data/no-data\";\r\n    import componentBottomLine from \"../../components/bottom-line/bottom-line\";\r\n\r\n    var common_static_url = app.globalData.get_static_url('common');\r\n    export default {\r\n        data() {\r\n            return {\r\n                common_static_url: common_static_url,\r\n                data_list_loding_status: 1,\r\n                data_list_loding_msg: '',\r\n                params: null,\r\n                detail: null,\r\n                editor_path_type: '',\r\n                rating_msg: ['非常差', '差', '一般', '好', '非常好'],\r\n                anonymous_value: 0,\r\n                anonymous_msg_list: ['你写的评论会以匿名的形式展现', '你写的评论会以昵称的形式展现'],\r\n                form_rating_list: [],\r\n                form_images_list: [],\r\n                form_content_list: [],\r\n                form_button_disabled: false\r\n            };\r\n        },\r\n\r\n        components: {\r\n            componentNoData,\r\n            componentBottomLine\r\n        },\r\n        props: {},\r\n\r\n        onLoad(params) {\r\n            this.setData({\r\n                params: params\r\n            });\r\n        },\r\n        \r\n        onShow() {\r\n            // 数据加载\r\n            this.init();\r\n            \r\n            // 分享菜单处理\r\n            app.globalData.page_share_handle();\r\n        },\r\n\r\n        // 下拉刷新\r\n        onPullDownRefresh() {\r\n            this.init();\r\n        },\r\n\r\n        methods: {\r\n            init() {\r\n                var self = this;\r\n                uni.showLoading({\r\n                    title: '加载中...'\r\n                });\r\n                this.setData({\r\n                    data_list_loding_status: 1\r\n                });\r\n                uni.request({\r\n                    url: app.globalData.get_request_url(\"comments\", \"order\"),\r\n                    method: 'POST',\r\n                    data: {\r\n                        id: this.params.id\r\n                    },\r\n                    dataType: 'json',\r\n                    success: res => {\r\n                        uni.hideLoading();\r\n                        uni.stopPullDownRefresh();\r\n                        if (res.data.code == 0) {\r\n                            var data = res.data.data;\r\n                            self.setData({\r\n                                editor_path_type: data.editor_path_type || '',\r\n                                detail: data.data,\r\n                                data_list_loding_status: 3,\r\n                                data_list_loding_msg: ''\r\n                            });\r\n                        } else {\r\n                            self.setData({\r\n                                data_list_loding_status: 2,\r\n                                data_list_loding_msg: res.data.msg\r\n                            });\r\n                            if (app.globalData.is_login_check(res.data, self, 'init')) {\r\n                                app.globalData.showToast(res.data.msg);\r\n                            }\r\n                        }\r\n                    },\r\n                    fail: () => {\r\n                        uni.hideLoading();\r\n                        uni.stopPullDownRefresh();\r\n                        self.setData({\r\n                            data_list_loding_status: 2,\r\n                            data_list_loding_msg: '服务器请求出错'\r\n                        });\r\n                        app.globalData.showToast('服务器请求出错');\r\n                    }\r\n                });\r\n            },\r\n\r\n            // 上传图片预览\r\n            upload_show_event(e) {\r\n                var index = e.currentTarget.dataset.index;\r\n                var ix = e.currentTarget.dataset.ix;\r\n                uni.previewImage({\r\n                    current: this.form_images_list[index][ix],\r\n                    urls: this.form_images_list[index]\r\n                });\r\n            },\r\n\r\n            // 图片删除\r\n            upload_delete_event(e) {\r\n                var index = e.currentTarget.dataset.index;\r\n                var ix = e.currentTarget.dataset.ix;\r\n                var self = this;\r\n                uni.showModal({\r\n                    title: '温馨提示',\r\n                    content: '删除后不可恢复、继续吗？',\r\n                    success(res) {\r\n                        if (res.confirm) {\r\n                            var list = self.form_images_list;\r\n                            list[index].splice(ix, 1);\r\n                            self.setData({\r\n                                form_images_list: list\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n\r\n            // 文件上传\r\n            file_upload_event(e) {\r\n                // 数据初始化\r\n                var index = e.currentTarget.dataset.index;\r\n                var temp_list = this.form_images_list;\r\n                var length = this.detail.items.length;\r\n                for (var i = 0; i < length; i++) {\r\n                    if (temp_list[i] == undefined) {\r\n                        temp_list[i] = [];\r\n                    }\r\n                }\r\n                this.setData({\r\n                    form_images_list: temp_list\r\n                });\r\n                \r\n                // 处理上传文件\r\n                var self = this;\r\n                uni.chooseImage({\r\n                    count: 3,\r\n                    success(res) {\r\n                        var success = 0;\r\n                        var fail = 0;\r\n                        var length = res.tempFilePaths.length;\r\n                        var count = 0;\r\n                        self.upload_one_by_one(index, res.tempFilePaths, success, fail, count, length);\r\n                    }\r\n                });\r\n            },\r\n\r\n            // 采用递归的方式上传多张\r\n            upload_one_by_one(index, img_paths, success, fail, count, length) {\r\n                var self = this;\r\n                if ((self.form_images_list[index] || null) == null || self.form_images_list[index].length < 3) {\r\n                    uni.uploadFile({\r\n                        url: app.globalData.get_request_url(\"index\", \"ueditor\"),\r\n                        filePath: img_paths[count],\r\n                        name: 'upfile',\r\n                        formData: {\r\n                            action: 'uploadimage',\r\n                            path_type: self.editor_path_type\r\n                        },\r\n                        success: function(res) {\r\n                            success++;\r\n                            if (res.statusCode == 200) {\r\n                                var data = typeof res.data == 'object' ? res.data : JSON.parse(res.data);\r\n                                if (data.code == 0 && (data.data.url || null) != null) {\r\n                                    var list = self.form_images_list;\r\n                                    if ((list[index] || null) == null) {\r\n                                        list[index] = [];\r\n                                    }\r\n                                    list[index].push(data.data.url);\r\n                                    self.setData({\r\n                                        form_images_list: list\r\n                                    });\r\n                                } else {\r\n                                    app.globalData.showToast(data.msg);\r\n                                }\r\n                            }\r\n                        },\r\n                        fail: function(e) {\r\n                            fail++;\r\n                        },\r\n                        complete: function(e) {\r\n                            count++;\r\n\r\n                            // 下一张\r\n                            if (count >= length) {\r\n                                // 上传完毕，作一下提示\r\n                                //app.showToast('上传成功' + success +'张', 'success');\r\n                            } else {\r\n                                // 递归调用，上传下一张\r\n                                self.upload_one_by_one(index, img_paths, success, fail, count, length);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n\r\n            // 是否匿名事件\r\n            anonymous_event(e) {\r\n                this.setData({\r\n                    anonymous_value: e.detail.value == true ? 1 : 0\r\n                });\r\n            },\r\n\r\n            // 评分事件\r\n            rating_event(e) {\r\n                // 参数\r\n                var index = e.currentTarget.dataset.index;\r\n                var value = e.currentTarget.dataset.value;\r\n                \r\n                // 数据初始化/赋值\r\n                var temp_list = this.form_rating_list;\r\n                var length = this.detail.items.length;\r\n                for (var i = 0; i < length; i++) {\r\n                    if (temp_list[i] == undefined) {\r\n                        temp_list[i] = 0;\r\n                    }\r\n                    if (index == i) {\r\n                        temp_list[i] = value;\r\n                    }\r\n                }\r\n                this.setData({\r\n                    form_rating_list: temp_list\r\n                });\r\n            },\r\n\r\n            // 评论内容\r\n            form_content_event(e) {\r\n                // 参数\r\n                var index = e.currentTarget.dataset.index;\r\n                var value = e.detail.value;\r\n                \r\n                // 数据初始化/赋值\r\n                var temp_list = this.form_content_list;\r\n                var length = this.detail.items.length;\r\n                for (var i = 0; i < length; i++) {\r\n                    if (temp_list[i] == undefined) {\r\n                        temp_list[i] = '';\r\n                    }\r\n                    if (index == i) {\r\n                        temp_list[i] = value;\r\n                    }\r\n                }\r\n                this.setData({\r\n                    form_content_list: temp_list\r\n                });\r\n            },\r\n\r\n            // 表单\r\n            formSubmit(e) {\r\n                // 商品数量\r\n                var length = this.detail.items.length;\r\n                \r\n                // 评分校验\r\n                var count = this.form_rating_list.length;\r\n                if (count < length) {\r\n                    app.globalData.showToast('请先评分');\r\n                    return false;\r\n                }\r\n                var max = Math.max.apply(null, this.form_rating_list);\r\n                var min = Math.min.apply(null, this.form_rating_list);\r\n\r\n                if (min < 1 || max > 5) {\r\n                    app.globalData.showToast('还有未评分');\r\n                    return false;\r\n                }\r\n                \r\n                // 内容校验\r\n                var count = this.form_content_list.length;\r\n                if (count < length) {\r\n                    app.globalData.showToast('请填写评论内容');\r\n                    return false;\r\n                }\r\n\r\n                for (var i in this.form_content_list) {\r\n                    var count = this.form_content_list[i].length;\r\n                    if (count < 6 || count > 230) {\r\n                        app.globalData.showToast('评论内容 6~230 个字符之间');\r\n                        return false;\r\n                    }\r\n                }\r\n                \r\n                // 图片校验\r\n                if (this.form_images_list.length > 0) {\r\n                    for (var i in this.form_images_list) {\r\n                        if (this.form_images_list[i].length > 3) {\r\n                            app.globalData.showToast('每项评论图片不能超过3张');\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                // 表单数据\r\n                var form_data = e.detail.value;\r\n                form_data['is_anonymous'] = form_data['is_anonymous'] == true ? 1 : 0;\r\n                form_data['id'] = this.detail.id;\r\n                form_data['goods_id'] = JSON.stringify(this.detail.items.map(function(v) {\r\n                    return v.goods_id;\r\n                }));\r\n                form_data['rating'] = JSON.stringify(this.form_rating_list);\r\n                form_data['content'] = JSON.stringify(this.form_content_list);\r\n                form_data['images'] = this.form_images_list.length > 0 ? JSON.stringify(this.form_images_list) : '';\r\n                \r\n                // 提交表单\r\n                var self = this;\r\n                uni.showLoading({\r\n                    title: '处理中...'\r\n                });\r\n                self.setData({\r\n                    form_button_disabled: true\r\n                });\r\n                uni.request({\r\n                    url: app.globalData.get_request_url(\"commentssave\", \"order\"),\r\n                    method: 'POST',\r\n                    data: form_data,\r\n                    dataType: 'json',\r\n                    success: res => {\r\n                        uni.hideLoading();\r\n                        if (res.data.code == 0) {\r\n                            app.globalData.showToast(res.data.msg, 'success');\r\n                            setTimeout(function() {\r\n                                uni.navigateBack();\r\n                            }, 2000);\r\n                        } else {\r\n                            self.setData({\r\n                                form_button_disabled: false\r\n                            });\r\n                            app.globalData.showToast(res.data.msg);\r\n                        }\r\n                    },\r\n                    fail: () => {\r\n                        uni.hideLoading();\r\n                        self.setData({\r\n                            form_button_disabled: false\r\n                        });\r\n                        app.globalData.showToast('服务器请求出错');\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n<style>\r\n    @import './user-order-comments.css';\r\n</style>","import mod from \"-!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-order-comments.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HB\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-order-comments.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1678688328176\n      var cssReload = require(\"D:/HB/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}