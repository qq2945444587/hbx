(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/classify/classify"],{"0adc":function(t,e,i){"use strict";i.r(e);var s=i("0be9"),o=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=o.a},"0be9":function(t,e,i){"use strict";(function(t){var s=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(i("2eee")),n=s(i("c973")),c=i("1173"),a=getApp(),r={data:function(){return{wd:"",w_jn:0,goodList:[],currentActive:0,bottomH:0,lefttabList:[],leftActive:0,icon_title:[],tiliactive:0,rightList:[],info:{},cartNumberList:[],shop_number:0,allpirs:"0",choose_show:!1,leftShop:!1,choose_show_info:{spec:[],img:"",price:"",original_price:"",choose:[],inventory:"",linag:"",goods:void 0}}},computed:{marginTop:function(){var e=t.getSystemInfoSync(),i=e.platform,s=e.statusBarHeight,o=s+4;return"android"==i.toLowerCase()&&(o+=4),o+"px"}},onLoad:function(){this.inptW()},onPullDownRefresh:function(){this.good_lists()},onShow:function(){this.good_lists()},methods:{pd:function(){(0,c.getCache)("info")?this.info=(0,c.getCache)("info"):t.showModal({title:"温馨提示",content:"请先登录或注册",success:function(e){e.confirm?(t.navigateTo({url:"/pages/login/login"}),console.log("用户点击确定")):e.cancel}})},cartdelgw:function(t){var e=this,i={id:t.goods_id,wode_id:t.id};t.stock>1?(this.$set(t,"stock",t.stock-=1),i.stock=t.stock,this.stocks(i)):(this.rightList.forEach((function(i){i.id==t.goods_id&&e.$set(i,"stock",0)})),this.$set(t,"stock",0),this.cartDels({wode_id:t.id}))},cartSavegw:function(t){this.$set(t,"stock",t.stock+=1);var e={id:t.goods_id,wode_id:t.id,stock:t.stock};this.stocks(e)},gwCarShop:function(){this.leftShop=!this.leftShop},previewB:function(){console.log("触发了"),t.previewImage({urls:[this.choose_show_info.img],indicator:"number"})},inptW:function(){var e=t.getMenuButtonBoundingClientRect();this.w_jn=e.width+50},goodLeft:function(t,e){this.leftActive=e,this.good_content_lists(t),this.icon_title=t.items?t.items:[],this.tiliactive=0},tabtitle:function(t,e){this.currentActive=e,this.lefttabList=t.items,this.goodLeft(this.lefttabList[0],0)},tilist:function(t,e){this.tiliactive=e,this.good_content_lists(t)},gg_xuan_botton:function(t,e,i){var s=this;return(0,n.default)(o.default.mark((function n(){var c,a,r,u,d,f;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!e.is_dont&&!e.is_disabled){o.next=2;break}return o.abrupt("return");case 2:if(c=s,a=s.choose_show_info.goods.specifications.choose,r=a.findIndex((function(e){return e.id===t.id})),u=a[r+1],t.value.forEach((function(t){""==t.is_active&&e.name==t.name?c.$set(t,"is_active","is_active"):c.$set(t,"is_active","")})),e.images&&e.is_active&&(s.choose_show_info.img=e.images),a[0].id==t.id&&a.forEach((function(t,e){t.value.forEach((function(t,i){0!=e&&(c.$set(t,"is_active",""),c.$set(t,"is_dont","is_dont"),c.$set(t,"is_disabled",""))}))})),-1!=a[0].value.findIndex((function(t){return"is_active"==t.is_active}))){o.next=12;break}return s.choose_show_info.img=s.choose_show_info.goods.images,o.abrupt("return");case 12:if(u&&u.value.forEach((function(t){c.$set(t,"is_active",""),c.$set(t,"is_dont","is_dont"),c.$set(t,"is_disabled","")})),s.choose_show_info.spec=[],a.forEach((function(t){t.value.forEach((function(e){e.is_active&&s.choose_show_info.spec.push({type:t.name,value:e.name})}))})),d={id:t.goods_id,spec:JSON.stringify(s.choose_show_info.spec)},r!=a.length-1||!e.is_active){o.next=21;break}return s.specdetail(),o.abrupt("return");case 21:s.choose_show_info.price=i.price,s.choose_show_info.inventory=i.inventory,s.choose_show_info.original_price=i.original_price;case 24:return o.next=26,s.$api.spectype(d);case 26:f=o.sent,[],0==f.code&&u&&u.value.forEach((function(t){-1!==f.data.spec_type.indexOf(t.name)&&(t.is_dont="")}));case 29:case"end":return o.stop()}}),n)})))()},cartdelB:function(e,i){if(0!==e.specifications.choose.length&&!i)return t.showToast({title:"不同规格的商品需要在购物车减购",duration:2e3,icon:"none"}),void this.gwCarShop();e.stock>1?(this.$set(e,"stock",e.stock-=1),this.stocks(e)):(this.$set(e,"stock",0),this.cartDels(e))},tianjiaB:function(e){this.choose_show_info.spec.length===e.specifications.choose.length?(this.choose_show=!1,this.cartSaveB(e,"g")):t.showToast({title:"请选择商品规格",duration:2e3,icon:"none"})},cartSaveB:function(t,e){if(0!==t.specifications.choose.length&&!e){this.choose_show=!0;var i=this;return t.specifications.choose.forEach((function(t,e){t.value.forEach((function(t,s){0==e?(i.$set(t,"is_active",""),i.$set(t,"is_dont",""),i.$set(t,"is_disabled","")):(i.$set(t,"is_active",""),i.$set(t,"is_dont","is_dont"),i.$set(t,"is_disabled",""))}))})),void(this.choose_show_info={spec:[],goods:t,id:t.id,img:t.images,price:t.price,inventory_unit:t.inventory_unit,original_price:t.original_price,inventory:t.inventory,choose:t.specifications.choose})}(0,c.getCache)("info")?(console.log(JSON.parse(JSON.stringify(t))),0==t.specifications.choose.length?(console.log("可以"),t.stock&&!t.spec?(this.$set(t,"stock",t.stock+=1),this.stocks(t)):(this.$set(t,"stock",1),this.cartSaves(t,1))):(this.$set(t,"stock",t.stock+=1),this.cartSaves(t))):this.pd()},specdetail:function(){var t=this;return(0,n.default)(o.default.mark((function e(){var i,s;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={id:t.choose_show_info.id,spec:JSON.stringify(t.choose_show_info.spec),stock:1},e.next=3,t.$api.specdetail(i);case 3:s=e.sent,0==s.code&&(t.choose_show_info.price=s.data.spec_base.price,t.choose_show_info.inventory=s.data.spec_base.inventory,t.choose_show_info.original_price=s.data.spec_base.original_price),console.log(s);case 6:case"end":return e.stop()}}),e)})))()},allDele:function(){var e=this;if(0!=this.cartNumberList.length){var i="",s=[];t.showModal({title:"温馨提示",content:"挑了这么久，真的要清空吗？",cancelText:"暂不",confirmText:"清除",success:function(t){t.confirm?(e.cartNumberList.forEach((function(t){s.push(t.id)})),i=s.join(","),e.cartDels(i,"k")):t.cancel}})}else t.showToast({title:"购物车现在为空",duration:2e3,icon:"none"})},cartDels:function(t,e){var i=this;return(0,n.default)(o.default.mark((function s(){var n,c;return o.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={id:""},n.id=e?t:t.wode_id,console.log(n),s.next=5,i.$api.cartDel(n);case 5:c=s.sent,0==c.code&&i.cartNumbers();case 7:case"end":return s.stop()}}),s)})))()},stocks:function(t){var e=this;return(0,n.default)(o.default.mark((function i(){var s,n;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s={goods_id:t.id,id:t.wode_id,stock:t.stock},console.log(s),i.next=4,e.$api.stockList(s);case 4:n=i.sent,0==n.code&&e.cartNumbers(),console.log(n);case 7:case"end":return i.stop()}}),i)})))()},cartSaves:function(e){var i=this;return(0,n.default)(o.default.mark((function s(){var n,c;return o.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={goods_id:e.id,spec:e.spec||0!==e.specifications.choose.length?i.choose_show_info.spec:"",stock:1},console.log(n),s.next=4,i.$api.cartSave(n);case 4:c=s.sent,0==c.code?i.cartNumbers():t.showToast({title:c.msg,duration:2e3,icon:"none"});case 6:case"end":return s.stop()}}),s)})))()},good_content_lists:function(t){var e=this;return(0,n.default)(o.default.mark((function i(){var s,n,c;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(t),s={category_id:t.id,page:1,wd:""},i.next=4,e.$api.good_content_list(s);case 4:n=i.sent,c=e,e.rightList=n.data.data||[],e.rightList.forEach((function(t){t.stList=[],e.cartNumberList.forEach((function(e){e.stock=parseInt(e.stock),e.specList=[],null!==e.spec&&(e.spec.forEach((function(t){e.specList.push(t.value)})),e.specString=e.specList.join(";")),0==t.specifications.choose.length?t.id==e.goods_id&&(c.$set(t,"stock",e.stock),c.$set(t,"wode_id",e.id)):t.id==e.goods_id&&(t.stList.push(e.stock),c.$set(t,"wode_id",e.id))})),0!==t.stList.length&&(t.stock=t.stList.reduce((function(t,e){return t+e}),0))}));case 8:case"end":return i.stop()}}),i)})))()},good_lists:function(){var e=this;return(0,n.default)(o.default.mark((function i(){var s,n;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$api.good_list();case 2:s=i.sent,0==s.code?(e.goodList=s.data.category,e.goodList.forEach((function(t){t.items.splice(0,0,{id:t.id,name:"全部"}),t.items.forEach((function(t){t.items&&t.items.splice(0,0,{id:t.id,name:"全部"})}))})),0,t.getSystemInfo({success:function(t){t.safeAreaInsets.top}}),n=e,e.tabtitle(e.goodList[0],0),e.$nextTick((function(){t.createSelectorQuery().in(n).select(".navigation-bar-fixed").boundingClientRect((function(t){n.bottomH=t.height})).exec()})),e.cartNumbers()):t.showToast({title:s.msg,duration:2e3}),t.stopPullDownRefresh();case 5:case"end":return i.stop()}}),i)})))()},cartNumbers:function(){var e=this;return(0,n.default)(o.default.mark((function i(){var s,n;return o.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$api.cartNumber();case 2:s=i.sent,0==s.code?(e.cartNumberList=s.data.data,e.shop_number=s.data.buy_number,e.allpirs=s.data.total_price,(0,c.setCache)("shop_number",e.shop_number),0!==e.shop_number?a.globalData.set_tab_bar_badge(String(e.shop_number),2):a.globalData.removeTabBarBadges(2),n=e,0!==e.rightList.length&&e.rightList.forEach((function(t){t.stList=[],0!==e.cartNumberList.length?(e.cartNumberList.forEach((function(e){e.stock=parseInt(e.stock),e.specList=[],null!==e.spec&&(e.spec.forEach((function(t){e.specList.push(t.value)})),e.specString=e.specList.join(";")),0==t.specifications.choose.length?t.id==e.goods_id&&(n.$set(t,"stock",e.stock),n.$set(t,"wode_id",e.id)):t.id==e.goods_id&&(t.stList.push(e.stock),n.$set(t,"wode_id",e.id))})),0!==t.stList.length&&(t.stock=t.stList.reduce((function(t,e){return t+e}),0))):n.$set(t,"stock",0)}))):t.showToast({title:s.msg,duration:2e3,icon:"none"});case 4:case"end":return i.stop()}}),i)})))()}}};e.default=r}).call(this,i("543d")["default"])},"15c3":function(t,e,i){},2499:function(t,e,i){"use strict";i.r(e);var s=i("2ea3"),o=i("0adc");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("4762");var c=i("f0c5"),a=Object(c["a"])(o["default"],s["b"],s["c"],!1,null,"f9dabd9a",null,!1,s["a"],void 0);e["default"]=a.exports},"2ea3":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var s=function(){var t=this,e=t.$createElement,i=(t._self._c,t.leftShop?t.cartNumberList.length:null),s=t.rightList.length;t._isMounted||(t.e0=function(e){t.leftShop=!t.leftShop},t.e1=function(e){t.choose_show=!1}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:s}})},o=[]},4762:function(t,e,i){"use strict";var s=i("15c3"),o=i.n(s);o.a},9028:function(t,e,i){"use strict";(function(t,e){var s=i("4ea4");i("ca73");s(i("66fd"));var o=s(i("2499"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])}},[["9028","common/runtime","common/vendor"]]]);